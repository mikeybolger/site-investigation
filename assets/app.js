angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(n,o){e.login(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,e){t.addPost=function(){t.postfileRef&&e.create({username:"miketest",fileRef:t.postfileRef,prefix:t.postprefix,firstName:t.postfirstName,lastName:t.postlastName,address:t.postaddress,townland:t.posttownland,phone:t.postphone,fax:t.postfax,email:t.postemail,noResidents:t.postnoResidents,noDoubleBeds:t.postnoDoubleBeds,noSingleBeds:t.postnoSingleBeds,waterSupply:t.postwaterSupply}).success(function(e){t.posts.unshift(e),t.postfileRef=null,t.postprefix=null,t.postfirstName=null,t.postlastName=null,t.postaddress=null,t.posttownland=null,t.postphone=null,t.postfax=null,t.postemail=null,t.postnoResidents=null,t.postnoDoubleBeds=null,t.postnoSingleBeds=null,t.postwaterSupply=null})},e.fetch().success(function(e){t.posts=e})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(t,e){t.register=function(n,o){e.register(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/welcome.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"}).when("/posts",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return e.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o){return t.post("/api/users",{username:n,password:o}).then(function(){return e.login(n,o)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwiUG9zdHNTdmMiLCJhZGRQb3N0IiwicG9zdGZpbGVSZWYiLCJjcmVhdGUiLCJmaWxlUmVmIiwicHJlZml4IiwicG9zdHByZWZpeCIsImZpcnN0TmFtZSIsInBvc3RmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBvc3RsYXN0TmFtZSIsImFkZHJlc3MiLCJwb3N0YWRkcmVzcyIsInRvd25sYW5kIiwicG9zdHRvd25sYW5kIiwicGhvbmUiLCJwb3N0cGhvbmUiLCJmYXgiLCJwb3N0ZmF4IiwiZW1haWwiLCJwb3N0ZW1haWwiLCJub1Jlc2lkZW50cyIsInBvc3Rub1Jlc2lkZW50cyIsIm5vRG91YmxlQmVkcyIsInBvc3Rub0RvdWJsZUJlZHMiLCJub1NpbmdsZUJlZHMiLCJwb3N0bm9TaW5nbGVCZWRzIiwid2F0ZXJTdXBwbHkiLCJwb3N0d2F0ZXJTdXBwbHkiLCJzdWNjZXNzIiwicG9zdCIsInBvc3RzIiwidW5zaGlmdCIsImZldGNoIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInJlZ2lzdGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJzdmMiLCJnZXRVc2VyIiwicmVzcG9uc2UiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRQyxPQUFPLE9BQ2QsWUNEREQs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LEVBQVNDLEtBQzVDSCxFQUFJQyxhQUdmRCxFQUFJTCxTQUFXLFNBQVUxQyxFQUFVQyxHQUNqQyxNQUFPc0MsR0FBTUwsS0FBSyxjQUNoQmxDLFNBQVVBLEVBQVVDLFNBQVVBLElBQzdCQyxLQUFLLFdBQ04sTUFBTzZDLEdBQUloRCxNQUFNQyxFQUFVQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuXHQnbmdSb3V0ZSdcblx0XSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xuICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXJcbiAgfSlcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2Yykge1xuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgVXNlclN2Yy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCB1c2VyKVxuLy8gICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgfSlcbiAgfVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1N2Yykge1xuICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJHNjb3BlLnBvc3RmaWxlUmVmKSB7XG4gICAgICBQb3N0c1N2Yy5jcmVhdGUoe1xuICAgICAgICB1c2VybmFtZTogJ21pa2V0ZXN0JyxcbiAgICAgICAgZmlsZVJlZjogJHNjb3BlLnBvc3RmaWxlUmVmLFxuICAgICAgICBwcmVmaXg6ICRzY29wZS5wb3N0cHJlZml4LFxuICAgICAgICBmaXJzdE5hbWU6ICRzY29wZS5wb3N0Zmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogJHNjb3BlLnBvc3RsYXN0TmFtZSxcbiAgICAgICAgYWRkcmVzczogJHNjb3BlLnBvc3RhZGRyZXNzLFxuICAgICAgICB0b3dubGFuZDogJHNjb3BlLnBvc3R0b3dubGFuZCxcbiAgICAgICAgcGhvbmU6ICRzY29wZS5wb3N0cGhvbmUsXG4gICAgICAgIGZheDogJHNjb3BlLnBvc3RmYXgsXG4gICAgICAgIGVtYWlsOiAkc2NvcGUucG9zdGVtYWlsLFxuICAgICAgICBub1Jlc2lkZW50czogJHNjb3BlLnBvc3Rub1Jlc2lkZW50cywgIFxuICAgICAgICBub0RvdWJsZUJlZHM6ICRzY29wZS5wb3N0bm9Eb3VibGVCZWRzLFxuICAgICAgICBub1NpbmdsZUJlZHM6ICRzY29wZS5wb3N0bm9TaW5nbGVCZWRzLFxuICAgICAgICB3YXRlclN1cHBseTogJHNjb3BlLnBvc3R3YXRlclN1cHBseVxuICAgICAgfSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpXG4gICAgICAgICRzY29wZS5wb3N0ZmlsZVJlZiA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0cHJlZml4ID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RmaXJzdE5hbWUgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGxhc3ROYW1lID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RhZGRyZXNzID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3R0b3dubGFuZCA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0cGhvbmUgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGZheCA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0ZW1haWwgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdG5vUmVzaWRlbnRzID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3Rub0RvdWJsZUJlZHMgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdG5vU2luZ2xlQmVkcyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0d2F0ZXJTdXBwbHkgPSBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIFBvc3RzU3ZjLmZldGNoKClcbiAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3RzKSB7XG4gICAgJHNjb3BlLnBvc3RzID0gcG9zdHNcbiAgfSlcbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKVxuXHR9XG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHBvc3QpIHtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpXG5cdH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgICAvLyRsb2NhdGlvbi5wYXRoKCcvJylcbiAgICB9KVxuICB9XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXJcbiAgLndoZW4oJy8nLCAgICAgICAgIFx0eyBjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3dlbGNvbWUuaHRtbCcgfSlcbiAgLndoZW4oJy9yZWdpc3RlcicsIFx0eyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3JlZ2lzdGVyLmh0bWwnIH0pXG4gIC53aGVuKCcvbG9naW4nLCAgICBcdHsgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9sb2dpbi5odG1sJyB9KVxuICAud2hlbignL3Bvc3RzJywgICAgIFx0eyBjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3Bvc3RzLmh0bWwnIH0pXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXNlclN2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICB2YXIgc3ZjID0gdGhpc1xuICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJylcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgfSlcbiAgfVxuICBzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBzdmMudG9rZW4gPSByZXNwb25zZS5kYXRhXG4gICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSByZXNwb25zZS5kYXRhXG4gICAgICByZXR1cm4gc3ZjLmdldFVzZXIoKVxuICAgIH0pXG4gIH1cbiAgc3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIH0pXG4gIH1cbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9