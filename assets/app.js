angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(n,o){e.login(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,e){t.addPost=function(){t.postfileRef&&e.create({fileRef:t.postfileRef,prefix:t.postprefix,firstName:t.postfirstName,lastName:t.postlastName,address:t.postaddress,townland:t.posttownland,phone:t.postphone,fax:t.postfax,email:t.postemail,noResidents:t.postnoResidents,noDoubleBeds:t.postnoDoubleBeds,noSingleBeds:t.postnoSingleBeds,waterSupply:t.postwaterSupply}).success(function(e){t.posts.unshift(e),t.postfileRef=null,t.postprefix=null,t.postfirstName=null,t.postlastName=null,t.postaddress=null,t.posttownland=null,t.postphone=null,t.postfax=null,t.postemail=null,t.postnoResidents=null,t.postnoDoubleBeds=null,t.postnoSingleBeds=null,t.postwaterSupply=null})},e.fetch().success(function(e){t.posts=e})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(t,e){t.register=function(n,o){e.register(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return e.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o){return t.post("/api/users",{username:n,password:o}).then(function(){return e.login(n,o)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwiUG9zdHNTdmMiLCJhZGRQb3N0IiwicG9zdGZpbGVSZWYiLCJjcmVhdGUiLCJmaWxlUmVmIiwicHJlZml4IiwicG9zdHByZWZpeCIsImZpcnN0TmFtZSIsInBvc3RmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBvc3RsYXN0TmFtZSIsImFkZHJlc3MiLCJwb3N0YWRkcmVzcyIsInRvd25sYW5kIiwicG9zdHRvd25sYW5kIiwicGhvbmUiLCJwb3N0cGhvbmUiLCJmYXgiLCJwb3N0ZmF4IiwiZW1haWwiLCJwb3N0ZW1haWwiLCJub1Jlc2lkZW50cyIsInBvc3Rub1Jlc2lkZW50cyIsIm5vRG91YmxlQmVkcyIsInBvc3Rub0RvdWJsZUJlZHMiLCJub1NpbmdsZUJlZHMiLCJwb3N0bm9TaW5nbGVCZWRzIiwid2F0ZXJTdXBwbHkiLCJwb3N0d2F0ZXJTdXBwbHkiLCJzdWNjZXNzIiwicG9zdCIsInBvc3RzIiwidW5zaGlmdCIsImZldGNoIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInJlZ2lzdGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJzdmMiLCJnZXRVc2VyIiwicmVzcG9uc2UiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLE9BQ0EsWUNEQUQs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QUFBNkMsR0FBQWhELE1BQUFDLEVBQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJ1xuXHRdKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uIChfLCB1c2VyKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxuICB9KVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4gICAgfSlcbiAgfVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1N2Yykge1xuICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJHNjb3BlLnBvc3RmaWxlUmVmKSB7XG4gICAgICBQb3N0c1N2Yy5jcmVhdGUoe1xuICAgICAgICBmaWxlUmVmOiAkc2NvcGUucG9zdGZpbGVSZWYsXG4gICAgICAgIHByZWZpeDogJHNjb3BlLnBvc3RwcmVmaXgsXG4gICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLnBvc3RmaXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiAkc2NvcGUucG9zdGxhc3ROYW1lLFxuICAgICAgICBhZGRyZXNzOiAkc2NvcGUucG9zdGFkZHJlc3MsXG4gICAgICAgIHRvd25sYW5kOiAkc2NvcGUucG9zdHRvd25sYW5kLFxuICAgICAgICBwaG9uZTogJHNjb3BlLnBvc3RwaG9uZSxcbiAgICAgICAgZmF4OiAkc2NvcGUucG9zdGZheCxcbiAgICAgICAgZW1haWw6ICRzY29wZS5wb3N0ZW1haWwsXG4gICAgICAgIG5vUmVzaWRlbnRzOiAkc2NvcGUucG9zdG5vUmVzaWRlbnRzLCAgXG4gICAgICAgIG5vRG91YmxlQmVkczogJHNjb3BlLnBvc3Rub0RvdWJsZUJlZHMsXG4gICAgICAgIG5vU2luZ2xlQmVkczogJHNjb3BlLnBvc3Rub1NpbmdsZUJlZHMsXG4gICAgICAgIHdhdGVyU3VwcGx5OiAkc2NvcGUucG9zdHdhdGVyU3VwcGx5XG4gICAgICB9KVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdClcbiAgICAgICAgJHNjb3BlLnBvc3RmaWxlUmVmID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RwcmVmaXggPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGZpcnN0TmFtZSA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0bGFzdE5hbWUgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGFkZHJlc3MgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHRvd25sYW5kID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RwaG9uZSA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0ZmF4ID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RlbWFpbCA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0bm9SZXNpZGVudHMgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdG5vRG91YmxlQmVkcyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0bm9TaW5nbGVCZWRzID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3R3YXRlclN1cHBseSA9IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgUG9zdHNTdmMuZmV0Y2goKVxuICAuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAkc2NvcGUucG9zdHMgPSBwb3N0c1xuICB9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Bvc3RzU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpXG5cdH1cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAocG9zdCkge1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdClcblx0fVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMpIHtcbiAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIFVzZXJTdmMucmVnaXN0ZXIodXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcbiAgICB9KVxuICB9XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXJcbiAgLndoZW4oJy8nLCAgICAgICAgIHsgY29udHJvbGxlcjogJ1Bvc3RzQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9wb3N0cy5odG1sJyB9KVxuICAud2hlbignL3JlZ2lzdGVyJywgeyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3JlZ2lzdGVyLmh0bWwnIH0pXG4gIC53aGVuKCcvbG9naW4nLCAgICB7IGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvbG9naW4uaHRtbCcgfSlcbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdVc2VyU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gIHZhciBzdmMgPSB0aGlzXG4gIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKVxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICB9KVxuICB9XG4gIHN2Yy5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHtcbiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHN2Yy50b2tlbiA9IHJlc3BvbnNlLmRhdGFcbiAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHJlc3BvbnNlLmRhdGFcbiAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpXG4gICAgfSlcbiAgfVxuICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB7XG4gICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHN2Yy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgfSlcbiAgfVxufSkiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=