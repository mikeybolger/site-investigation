angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(n,o){e.login(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,e){t.addPost=function(){t.postfileRef&&e.create({username:"miketest",fileRef:t.postfileRef,prefix:t.postprefix,firstName:t.postfirstName,lastName:t.postlastName,address:t.postaddress,townland:t.posttownland,phone:t.postphone,fax:t.postfax,email:t.postemail,noResidents:t.postnoResidents,noDoubleBeds:t.postnoDoubleBeds,noSingleBeds:t.postnoSingleBeds,waterSupply:t.postwaterSupply}).success(function(e){t.posts.unshift(e),t.postfileRef=null,t.postprefix=null,t.postfirstName=null,t.postlastName=null,t.postaddress=null,t.posttownland=null,t.postphone=null,t.postfax=null,t.postemail=null,t.postnoResidents=null,t.postnoDoubleBeds=null,t.postnoSingleBeds=null,t.postwaterSupply=null})},e.fetch().success(function(e){t.posts=e})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(t,e){t.register=function(n,o){e.register(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return e.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o){return t.post("/api/users",{username:n,password:o}).then(function(){return e.login(n,o)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJVc2VyU3ZjIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwiUG9zdHNTdmMiLCJhZGRQb3N0IiwicG9zdGZpbGVSZWYiLCJjcmVhdGUiLCJmaWxlUmVmIiwicHJlZml4IiwicG9zdHByZWZpeCIsImZpcnN0TmFtZSIsInBvc3RmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBvc3RsYXN0TmFtZSIsImFkZHJlc3MiLCJwb3N0YWRkcmVzcyIsInRvd25sYW5kIiwicG9zdHRvd25sYW5kIiwicGhvbmUiLCJwb3N0cGhvbmUiLCJmYXgiLCJwb3N0ZmF4IiwiZW1haWwiLCJwb3N0ZW1haWwiLCJub1Jlc2lkZW50cyIsInBvc3Rub1Jlc2lkZW50cyIsIm5vRG91YmxlQmVkcyIsInBvc3Rub0RvdWJsZUJlZHMiLCJub1NpbmdsZUJlZHMiLCJwb3N0bm9TaW5nbGVCZWRzIiwid2F0ZXJTdXBwbHkiLCJwb3N0d2F0ZXJTdXBwbHkiLCJzdWNjZXNzIiwicG9zdCIsInBvc3RzIiwidW5zaGlmdCIsImZldGNoIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInJlZ2lzdGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJzdmMiLCJnZXRVc2VyIiwicmVzcG9uc2UiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRQyxPQUFPLE9BQ2QsWUNEREQs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MUMsRUFBVUMsR0FDakMsTUFBT3NDLEdBQU1MLEtBQUssY0FDaEJsQyxTQUFVQSxFQUFVQyxTQUFVQSxJQUM3QkMsS0FBSyxXQUNOLE1BQU82QyxHQUFJaEQsTUFBTUMsRUFBVUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcblx0J25nUm91dGUnXG5cdF0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24gKF8sIHVzZXIpIHtcbiAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyXG4gIH0pXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMpIHtcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIFVzZXJTdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcbi8vICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKVxuICAgIH0pXG4gIH1cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUG9zdHNDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgUG9zdHNTdmMpIHtcbiAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCRzY29wZS5wb3N0ZmlsZVJlZikge1xuICAgICAgUG9zdHNTdmMuY3JlYXRlKHtcbiAgICAgICAgdXNlcm5hbWU6ICdtaWtldGVzdCcsXG4gICAgICAgIGZpbGVSZWY6ICRzY29wZS5wb3N0ZmlsZVJlZixcbiAgICAgICAgcHJlZml4OiAkc2NvcGUucG9zdHByZWZpeCxcbiAgICAgICAgZmlyc3ROYW1lOiAkc2NvcGUucG9zdGZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6ICRzY29wZS5wb3N0bGFzdE5hbWUsXG4gICAgICAgIGFkZHJlc3M6ICRzY29wZS5wb3N0YWRkcmVzcyxcbiAgICAgICAgdG93bmxhbmQ6ICRzY29wZS5wb3N0dG93bmxhbmQsXG4gICAgICAgIHBob25lOiAkc2NvcGUucG9zdHBob25lLFxuICAgICAgICBmYXg6ICRzY29wZS5wb3N0ZmF4LFxuICAgICAgICBlbWFpbDogJHNjb3BlLnBvc3RlbWFpbCxcbiAgICAgICAgbm9SZXNpZGVudHM6ICRzY29wZS5wb3N0bm9SZXNpZGVudHMsICBcbiAgICAgICAgbm9Eb3VibGVCZWRzOiAkc2NvcGUucG9zdG5vRG91YmxlQmVkcyxcbiAgICAgICAgbm9TaW5nbGVCZWRzOiAkc2NvcGUucG9zdG5vU2luZ2xlQmVkcyxcbiAgICAgICAgd2F0ZXJTdXBwbHk6ICRzY29wZS5wb3N0d2F0ZXJTdXBwbHlcbiAgICAgIH0pXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KVxuICAgICAgICAkc2NvcGUucG9zdGZpbGVSZWYgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHByZWZpeCA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0Zmlyc3ROYW1lID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RsYXN0TmFtZSA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0YWRkcmVzcyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0dG93bmxhbmQgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHBob25lID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RmYXggPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGVtYWlsID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3Rub1Jlc2lkZW50cyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0bm9Eb3VibGVCZWRzID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3Rub1NpbmdsZUJlZHMgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHdhdGVyU3VwcGx5ID0gbnVsbFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBQb3N0c1N2Yy5mZXRjaCgpXG4gIC5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0cykge1xuICAgICRzY29wZS5wb3N0cyA9IHBvc3RzXG4gIH0pXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJylcblx0fVxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwb3N0KSB7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KVxuXHR9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2Yykge1xuICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgVXNlclN2Yy5yZWdpc3Rlcih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCB1c2VyKVxuICAgICAgLy8kbG9jYXRpb24ucGF0aCgnLycpXG4gICAgfSlcbiAgfVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICRyb3V0ZVByb3ZpZGVyXG4gIC53aGVuKCcvJywgICAgICAgICB7IGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvcG9zdHMuaHRtbCcgfSlcbiAgLndoZW4oJy9yZWdpc3RlcicsIHsgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9yZWdpc3Rlci5odG1sJyB9KVxuICAud2hlbignL2xvZ2luJywgICAgeyBjb250cm9sbGVyOiAnTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2xvZ2luLmh0bWwnIH0pXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXNlclN2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICB2YXIgc3ZjID0gdGhpc1xuICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJylcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgfSlcbiAgfVxuICBzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBzdmMudG9rZW4gPSByZXNwb25zZS5kYXRhXG4gICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ10gPSByZXNwb25zZS5kYXRhXG4gICAgICByZXR1cm4gc3ZjLmdldFVzZXIoKVxuICAgIH0pXG4gIH1cbiAgc3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzdmMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIH0pXG4gIH1cbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9