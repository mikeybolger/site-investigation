angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(e,n){t.currentUser=n})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(t,e){t.login=function(n,o){e.login(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,e){t.addPost=function(){t.postfileRef&&e.create({username:"miketest",fileRef:t.postfileRef,prefix:t.postprefix,firstName:t.postfirstName,lastName:t.postlastName,address:t.postaddress,townland:t.posttownland,phone:t.postphone,fax:t.postfax,email:t.postemail,noResidents:t.postnoResidents,noDoubleBeds:t.postnoDoubleBeds,noSingleBeds:t.postnoSingleBeds,waterSupply:t.postwaterSupply}).success(function(e){t.postfileRef=null,t.postprefix=null,t.postfirstName=null,t.postlastName=null,t.postaddress=null,t.posttownland=null,t.postphone=null,t.postfax=null,t.postemail=null,t.postnoResidents=null,t.postnoDoubleBeds=null,t.postnoSingleBeds=null,t.postwaterSupply=null})},t.$on("ws:new_project",function(e,n){t.$apply(function(){t.posts.unshift(n)})}),e.fetch().success(function(e){t.posts=e})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(t,e){t.register=function(n,o){e.register(n,o).then(function(e){t.$emit("login",e)})}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"/templates/register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/templates/login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var e=this;e.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},e.login=function(n,o){return t.post("/api/sessions",{username:n,password:o}).then(function(n){return e.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,e.getUser()})},e.register=function(n,o){return t.post("/api/users",{username:n,password:o}).then(function(){return e.login(n,o)})}}]),angular.module("app").run(["$rootScope","$timeout",function(t,e){!function n(){var o="ws://localhost:3000",s=new WebSocket(o);s.onopen=function(){console.log("Websocket Connected")},s.onclose=function(t){console.log("Websocket disconnected. Trying to reconnect..."),e(n,1e4)},s.onmessage=function(e){var n=JSON.parse(e.data);t.$broadcast("ws:"+n.topic,n.data)}}()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwiVXNlclN2YyIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRoZW4iLCIkZW1pdCIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RmaWxlUmVmIiwiY3JlYXRlIiwiZmlsZVJlZiIsInByZWZpeCIsInBvc3RwcmVmaXgiLCJmaXJzdE5hbWUiLCJwb3N0Zmlyc3ROYW1lIiwibGFzdE5hbWUiLCJwb3N0bGFzdE5hbWUiLCJhZGRyZXNzIiwicG9zdGFkZHJlc3MiLCJ0b3dubGFuZCIsInBvc3R0b3dubGFuZCIsInBob25lIiwicG9zdHBob25lIiwiZmF4IiwicG9zdGZheCIsImVtYWlsIiwicG9zdGVtYWlsIiwibm9SZXNpZGVudHMiLCJwb3N0bm9SZXNpZGVudHMiLCJub0RvdWJsZUJlZHMiLCJwb3N0bm9Eb3VibGVCZWRzIiwibm9TaW5nbGVCZWRzIiwicG9zdG5vU2luZ2xlQmVkcyIsIndhdGVyU3VwcGx5IiwicG9zdHdhdGVyU3VwcGx5Iiwic3VjY2VzcyIsInBvc3QiLCIkYXBwbHkiLCJwb3N0cyIsInVuc2hpZnQiLCJmZXRjaCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJyZWdpc3RlciIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwic3ZjIiwiZ2V0VXNlciIsInJlc3BvbnNlIiwiZGF0YSIsInRva2VuIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwicnVuIiwiJHJvb3RTY29wZSIsIiR0aW1lb3V0IiwiY29ubmVjdCIsInVybCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJjb25zb2xlIiwibG9nIiwib25jbG9zZSIsImUiLCJvbm1lc3NhZ2UiLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiJGJyb2FkY2FzdCIsInRvcGljIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsT0FBTyxPQUNkLFlDRERELFFBQVFDLE9BQU8sT0FDZEMsV0FBVyxtQkFBQSxTQUFtQixTQUFVQyxHQUN2Q0EsRUFBT0MsSUFBSSxRQUFTLFNBQVVDLEVBQUdDLEdBQy9CSCxFQUFPSSxZQUFjRCxPQ0h6Qk4sUUFBUUMsT0FBTyxPQUNkQyxXQUFXLGFBQUEsU0FBQSxVQUFhLFNBQVVDLEVBQVFLLEdBQ3pDTCxFQUFPTSxNQUFRLFNBQVVDLEVBQVVDLEdBQ2pDSCxFQUFRQyxNQUFNQyxFQUFVQyxHQUN2QkMsS0FBSyxTQUFVTixHQUNkSCxFQUFPVSxNQUFNLFFBQVNQLFNDTDVCTixRQUFRQyxPQUFPLE9BQ2RDLFdBQVcsYUFBQSxTQUFBLFdBQWEsU0FBVUMsRUFBUVcsR0FDekNYLEVBQU9ZLFFBQVUsV0FDWFosRUFBT2EsYUFDVEYsRUFBU0csUUFDUFAsU0FBVSxXQUNWUSxRQUFTZixFQUFPYSxZQUNoQkcsT0FBUWhCLEVBQU9pQixXQUNmQyxVQUFXbEIsRUFBT21CLGNBQ2xCQyxTQUFVcEIsRUFBT3FCLGFBQ2pCQyxRQUFTdEIsRUFBT3VCLFlBQ2hCQyxTQUFVeEIsRUFBT3lCLGFBQ2pCQyxNQUFPMUIsRUFBTzJCLFVBQ2RDLElBQUs1QixFQUFPNkIsUUFDWkMsTUFBTzlCLEVBQU8rQixVQUNkQyxZQUFhaEMsRUFBT2lDLGdCQUNwQkMsYUFBY2xDLEVBQU9tQyxpQkFDckJDLGFBQWNwQyxFQUFPcUMsaUJBQ3JCQyxZQUFhdEMsRUFBT3VDLGtCQUVyQkMsUUFBUSxTQUFVQyxHQUVqQnpDLEVBQU9hLFlBQWMsS0FDckJiLEVBQU9pQixXQUFhLEtBQ3BCakIsRUFBT21CLGNBQWdCLEtBQ3ZCbkIsRUFBT3FCLGFBQWUsS0FDdEJyQixFQUFPdUIsWUFBYyxLQUNyQnZCLEVBQU95QixhQUFlLEtBQ3RCekIsRUFBTzJCLFVBQVksS0FDbkIzQixFQUFPNkIsUUFBVSxLQUNqQjdCLEVBQU8rQixVQUFZLEtBQ25CL0IsRUFBT2lDLGdCQUFrQixLQUN6QmpDLEVBQU9tQyxpQkFBbUIsS0FDMUJuQyxFQUFPcUMsaUJBQW1CLEtBQzFCckMsRUFBT3VDLGdCQUFrQixRQUsvQnZDLEVBQU9DLElBQUksaUJBQWtCLFNBQVVDLEVBQUd1QyxHQUN4Q3pDLEVBQU8wQyxPQUFPLFdBQ1oxQyxFQUFPMkMsTUFBTUMsUUFBUUgsT0FJekI5QixFQUFTa0MsUUFDUkwsUUFBUSxTQUFVRyxHQUNqQjNDLEVBQU8yQyxNQUFRQSxPQy9DbkI5QyxRQUFRQyxPQUFPLE9BQ2RnRCxRQUFRLFlBQUEsUUFBWSxTQUFVQyxHQUM5QkMsS0FBS0gsTUFBUSxXQUNaLE1BQU9FLEdBQU1FLElBQUksZUFFbEJELEtBQUtsQyxPQUFTLFNBQVUyQixHQUN2QixNQUFPTSxHQUFNTixLQUFLLGFBQWNBLE9DTmxDNUMsUUFBUUMsT0FBTyxPQUNkQyxXQUFXLGdCQUFBLFNBQUEsVUFBZ0IsU0FBVUMsRUFBUUssR0FDNUNMLEVBQU9rRCxTQUFXLFNBQVUzQyxFQUFVQyxHQUNwQ0gsRUFBUTZDLFNBQVMzQyxFQUFVQyxHQUMxQkMsS0FBSyxTQUFVTixHQUNkSCxFQUFPVSxNQUFNLFFBQVNQLFNDTDVCTixRQUFRQyxPQUFPLE9BQ2RxRCxRQUFBLGlCQUFPLFNBQVVDLEdBQ2hCQSxFQUNDQyxLQUFLLEtBQWV0RCxXQUFZLFlBQWF1RCxZQUFhLDBCQUMxREQsS0FBSyxhQUFldEQsV0FBWSxlQUFnQnVELFlBQWEsNkJBQzdERCxLQUFLLFVBQWV0RCxXQUFZLFlBQWF1RCxZQUFhLDZCQ0w3RHpELFFBQVFDLE9BQU8sT0FDZGdELFFBQVEsV0FBQSxRQUFXLFNBQVVDLEdBQzVCLEdBQUlRLEdBQU1QLElBQ1ZPLEdBQUlDLFFBQVUsV0FDWixNQUFPVCxHQUFNRSxJQUFJLGNBQ2hCeEMsS0FBSyxTQUFVZ0QsR0FDZCxNQUFPQSxHQUFTQyxRQUdwQkgsRUFBSWpELE1BQVEsU0FBVUMsRUFBVUMsR0FDOUIsTUFBT3VDLEdBQU1OLEtBQUssaUJBQ2hCbEMsU0FBVUEsRUFBVUMsU0FBVUEsSUFDN0JDLEtBQUssU0FBVWdELEdBR2hCLE1BRkFGLEdBQUlJLE1BQVFGLEVBQVNDLEtBQ3JCWCxFQUFNYSxTQUFTQyxRQUFRQyxPQUFPLFVBQVlMLEVBQVNDLEtBQzVDSCxFQUFJQyxhQUdmRCxFQUFJTCxTQUFXLFNBQVUzQyxFQUFVQyxHQUNqQyxNQUFPdUMsR0FBTU4sS0FBSyxjQUNoQmxDLFNBQVVBLEVBQVVDLFNBQVVBLElBQzdCQyxLQUFLLFdBQ04sTUFBTzhDLEdBQUlqRCxNQUFNQyxFQUFVQyxTQ3RCakNYLFFBQVFDLE9BQU8sT0FDZGlFLEtBQUEsYUFBQSxXQUFJLFNBQVVDLEVBQVlDLElBQzFCLFFBQVVDLEtBQ1QsR0FBSUMsR0FBTSxzQkFDTkMsRUFBYSxHQUFJQyxXQUFVRixFQUUvQkMsR0FBV0UsT0FBUyxXQUNuQkMsUUFBUUMsSUFBSSx3QkFHYkosRUFBV0ssUUFBVSxTQUFVQyxHQUM5QkgsUUFBUUMsSUFBSSxrREFDWlAsRUFBU0MsRUFBUyxNQUduQkUsRUFBV08sVUFBWSxTQUFVRCxHQUNoQyxHQUFJRSxHQUFVQyxLQUFLQyxNQUFNSixFQUFFaEIsS0FDM0JNLEdBQVdlLFdBQVcsTUFBUUgsRUFBUUksTUFBT0osRUFBUWxCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJ1xuXHRdKVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uIChfLCB1c2VyKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxuICB9KVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHVzZXIpXG4vLyAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcbiAgICB9KVxuICB9XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFBvc3RzU3ZjKSB7XG4gICRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICgkc2NvcGUucG9zdGZpbGVSZWYpIHtcbiAgICAgIFBvc3RzU3ZjLmNyZWF0ZSh7XG4gICAgICAgIHVzZXJuYW1lOiAnbWlrZXRlc3QnLFxuICAgICAgICBmaWxlUmVmOiAkc2NvcGUucG9zdGZpbGVSZWYsXG4gICAgICAgIHByZWZpeDogJHNjb3BlLnBvc3RwcmVmaXgsXG4gICAgICAgIGZpcnN0TmFtZTogJHNjb3BlLnBvc3RmaXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiAkc2NvcGUucG9zdGxhc3ROYW1lLFxuICAgICAgICBhZGRyZXNzOiAkc2NvcGUucG9zdGFkZHJlc3MsXG4gICAgICAgIHRvd25sYW5kOiAkc2NvcGUucG9zdHRvd25sYW5kLFxuICAgICAgICBwaG9uZTogJHNjb3BlLnBvc3RwaG9uZSxcbiAgICAgICAgZmF4OiAkc2NvcGUucG9zdGZheCxcbiAgICAgICAgZW1haWw6ICRzY29wZS5wb3N0ZW1haWwsXG4gICAgICAgIG5vUmVzaWRlbnRzOiAkc2NvcGUucG9zdG5vUmVzaWRlbnRzLCAgXG4gICAgICAgIG5vRG91YmxlQmVkczogJHNjb3BlLnBvc3Rub0RvdWJsZUJlZHMsXG4gICAgICAgIG5vU2luZ2xlQmVkczogJHNjb3BlLnBvc3Rub1NpbmdsZUJlZHMsXG4gICAgICAgIHdhdGVyU3VwcGx5OiAkc2NvcGUucG9zdHdhdGVyU3VwcGx5XG4gICAgICB9KVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgLy8kc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KVxuICAgICAgICAkc2NvcGUucG9zdGZpbGVSZWYgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHByZWZpeCA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0Zmlyc3ROYW1lID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RsYXN0TmFtZSA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0YWRkcmVzcyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0dG93bmxhbmQgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHBob25lID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3RmYXggPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdGVtYWlsID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3Rub1Jlc2lkZW50cyA9IG51bGwsXG4gICAgICAgICRzY29wZS5wb3N0bm9Eb3VibGVCZWRzID0gbnVsbCxcbiAgICAgICAgJHNjb3BlLnBvc3Rub1NpbmdsZUJlZHMgPSBudWxsLFxuICAgICAgICAkc2NvcGUucG9zdHdhdGVyU3VwcGx5ID0gbnVsbFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAkc2NvcGUuJG9uKCd3czpuZXdfcHJvamVjdCcsIGZ1bmN0aW9uIChfLCBwb3N0KSB7XG4gICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KVxuICAgIH0pXG4gIH0pXG5cbiAgUG9zdHNTdmMuZmV0Y2goKVxuICAuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAkc2NvcGUucG9zdHMgPSBwb3N0c1xuICB9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Bvc3RzU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpXG5cdH1cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAocG9zdCkge1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdClcblx0fVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJTdmMpIHtcbiAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIFVzZXJTdmMucmVnaXN0ZXIodXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcbiAgICAgIC8vJGxvY2F0aW9uLnBhdGgoJy8nKVxuICAgIH0pXG4gIH1cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAkcm91dGVQcm92aWRlclxuICAud2hlbignLycsICAgICAgICAgeyBjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3Bvc3RzLmh0bWwnIH0pXG4gIC53aGVuKCcvcmVnaXN0ZXInLCB7IGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvcmVnaXN0ZXIuaHRtbCcgfSlcbiAgLndoZW4oJy9sb2dpbicsICAgIHsgY29udHJvbGxlcjogJ0xvZ2luQ3RybCcsIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9sb2dpbi5odG1sJyB9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgdmFyIHN2YyA9IHRoaXNcbiAgc3ZjLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgIH0pXG4gIH1cbiAgc3ZjLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xuICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgc3ZjLnRva2VuID0gcmVzcG9uc2UuZGF0YVxuICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gcmVzcG9uc2UuZGF0YVxuICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKClcbiAgICB9KVxuICB9XG4gIHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcbiAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICB9KVxuICB9XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcblx0KGZ1bmN0aW9uIGNvbm5lY3QgKCkge1xuXHRcdHZhciB1cmwgPSAnd3M6Ly9sb2NhbGhvc3Q6MzAwMCdcblx0XHR2YXIgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKVxuXG5cdFx0Y29ubmVjdGlvbi5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnV2Vic29ja2V0IENvbm5lY3RlZCcpXG5cdFx0fVxuXG5cdFx0Y29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdXZWJzb2NrZXQgZGlzY29ubmVjdGVkLiBUcnlpbmcgdG8gcmVjb25uZWN0Li4uJylcblx0XHRcdCR0aW1lb3V0KGNvbm5lY3QsIDEwKjEwMDApXG5cdFx0fVxuXG5cdFx0Y29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuXHRcdFx0dmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSlcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSlcblxuXHRcdH1cblx0XHQvL2Nvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnV2Vic29ja2V0IENvbm5lY3RlZCcpXG5cdFx0Ly99XG5cdH0pKClcbn0pXG5cbi8qYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4ucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG5cdHZhciB1cmwgPSAnd3M6Ly9sb2NhbGhvc3Q6MzAwMCdcblx0dmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHVybClcblxuXHRjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZygnV2Vic29ja2V0IENvbm5lY3RlZCcpXG5cdH1cblxuXHRjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0Y29uc29sZS5sb2coZSlcblx0XHR2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UoZS5kYXRhKVxuXHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudG9waWMsIHBheWxvYWQuZGF0YSlcblx0fVxufSkqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9